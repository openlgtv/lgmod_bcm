#!/bin/sh
# mtdinfo.sh script by mmm4m5m
# adapted for OpenLGTV BCM by xeros
# Source code released under GPL License

# example output:
#MTDINFO:
#boot............................00000000 000c0000 boot.bin........................  347684        1    30101
#mtdinfo.........................000c0000 00040000 MTD.INFO........................    5616  3060101    30101
#crc32info.......................00100000 00040000 CRC32.INFO......................     256  3060101    30101
#rootfs..........................00140000 00300000 rootfs.squashfs................. 1679360        1    20101
#lginit..........................00440000 00040000 lginit.squashfs.................   20480  3060101    20101
#model...........................00480000 00040000 model.squashfs..................    4096  3060101    20101
#logo............................004c0000 00080000 logo.img........................  165542  3060101    20101
#data............................19f00000 00800000 ................................       0        0   100100
#kernel..........................00540000 00300000 kernel.lzo...................... 2086848        3    20101
#lgapp...........................0ef80000 01000000 lgapp.lzo....................... 9083168  3201901      101
#lgres...........................0ff80000 01800000 lgres.squashfs..................22884352  3201901      101
#lgfont..........................03040000 01000000 lgfont.img...................... 1515520  3060101    20101
#ezcal...........................04040000 00400000 ezcal.squashfs.................. 3907584  3060101    20101
#estream.........................04440000 00800000 estreamer.squashfs.............. 7839744  3060101    20101
#opensrc.........................11780000 00800000 opensrc.squashfs................ 3362816  3201201      101
#addon...........................05440000 05000000 addon.squashfs..................21778432  3201801    20101
#game............................0c440000 02800000 game.squashfs...................38227968  3060101    20101
#fladata.........................1db00000 00300000 ................................       0        0   100000
#browser.........................16f80000 02000000 browser.squashfs................17920000  3201201      101
#brodata.........................1bb00000 02000000 ................................       0        0   100000
#vcsdata.........................1a700000 01400000 ................................       0        0   100000
#nvram...........................1ea40000 00100000 ................................       0        0      100
#idfile..........................1e800000 00040000 idfile.squashfs.................       0        0    40101
#cert............................1e840000 00080000 cert.squashfs...................       0        0    40101
#authcxt.........................1e8c0000 00180000 ................................       0        0    40000
#user............................18f80000 00180000 ................................       0        0   100000
#sdpdata.........................1de00000 00a00000 ................................       0        0   100000
#lginit..........................0ec40000 00040000 lginit.squashfs.................       0        0      100
#kernel..........................0ec80000 00300000 kernel.lzo......................       0        0      100
#lgapp...........................00840000 01000000 lgapp.lzo....................... 9083232  3201201    20100
#lgres...........................01840000 01800000 lgres.squashfs..................22884352  3201201    20100
#opensrc.........................04c40000 00800000 opensrc.squashfs................       0        0    20100
#addon...........................11f80000 05000000 addon.squashfs..................21745664  3201201      100
#browser.........................0a440000 02000000 browser.squashfs................       0        0    20100
#remain..........................19100000 00e00000 ................................       0        0        0
#hist............................1eb40000 00040000 ................................       0        0    10000
#env_nvm.........................1eb80000 00040000 ................................       0        0    10000
#macadr..........................1ebc0000 00040000 ................................       0        0    10000
#bbminfo.........................1ec00000 00400000 ................................       0        0    10100
#reserved........................1f000000 01000000 ................................       0        0    10100
#those lines are cut:
#................................00000000 00000000 ................................       0        0        0

echo "MTDINFO:"
hexdump /dev/mtd1 -vs240 -e'32 "%_p" 2 "%08x "" " 32 "%_p" "%8d " 2 "%8x ""\n"' | head -n 60 | grep -v "^."
